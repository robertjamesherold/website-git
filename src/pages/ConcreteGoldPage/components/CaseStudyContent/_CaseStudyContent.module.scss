.content
{
    font-family: $fontFamily;
    line-height: $baseH;

    max-width: 100%;

    color: rgb($codeTextPri);
}

.section
{
    overflow: hidden;

    margin-bottom: $space2;

    transition: all .3s ease;
    transform: translateY(20px);
    animation: fadeInUp .6s ease forwards;
    // Animation beim Laden

    opacity: 0;
    border: $border1;
    border-radius: $bR1;
    background: rgb($codeBgSec);
    box-shadow: $shadXs;

    &:hover
    {
        transform: translateY(-2px);

        box-shadow: $shadSm;
    }

    @for $i from 1 through 10
    {
        &:nth-child(#{$i})
        {
            animation-delay: #{$i * .1}s;
        }
    }
}

.sectionHeader
{
    font-size: $fs3;
    font-weight: $fw6;

    position: relative;

    display: flex;
    align-items: center;
    justify-content: space-between;

    width: 100%;
    padding: $space2;

    cursor: pointer;
    transition: all .3s ease;
    text-align: left;

    color: rgb($codeTextPri);
    border: none;
    background: rgb($codeBgTer);

    &:hover
    {
        color: rgb($codeBlue);
        background: rgba($codeBlue, .1);
    }

    &:focus
    {
        outline: 2px solid rgb($codeBlue);
        outline-offset: -2px;
    }

    // Pfeil Icon
    &::after
    {
        font-size: $fs16;

        margin-left: auto;

        content: '‚ñ∂';
        transition: transform .3s ease;

        color: rgb($codeBlue);
    }

    // Wenn Section offen ist
    &[aria-expanded='true']::after
    {
        transform: rotate(90deg);
    }

    // Hover Effekt f√ºr Pfeil
    &:hover::after
    {
        transform: scale(1.1);

        color: rgb($codeBlueBright);
    }

    // Aktiver Zustand
    &:active
    {
        background: rgba($codeBlue, .2);
    }
}

.sectionContent
{
    padding: $space2;
    // Slide-in Animation

    animation: slideDown .4s ease;

    border-top: 1px solid rgba($codeTextTer, .2);
    background: rgb($codeBgSec);
}

.sectionMainText
{
    font-size: $fs16;
    line-height: $baseH;

    margin-bottom: $space2;

    text-align: justify;
    word-wrap: break-word;
    -webkit-hyphens: auto;
    // Automatische Silbentrennung
    hyphens: auto;

    color: rgb($codeTextSec);

    -ms-hyphens: auto;
    overflow-wrap: break-word;

    &:first-letter
    {
        font-size: 1.2em;
        font-weight: $fw6;

        color: rgb($codeBlue);
    }
}

.subsections
{
    display: flex;
    flex-direction: column;

    gap: $space2;
}

.subsection
{
    position: relative;

    padding: $space2;

    transition: all .3s ease;
    transform: translateX(-20px);
    animation: slideInLeft .5s ease forwards;
    // Staggered Animation f√ºr Subsections

    opacity: 0;
    border-left: 4px solid rgb($codeBlue);
    border-radius: $bR1;
    background: rgb($codeBgTer);

    &:hover
    {
        border-left-color: rgb($codeBlueBright);
        background: rgba($codeBlue, .05);
    }

    @for $i from 1 through 10
    {
        &:nth-child(#{$i})
        {
            animation-delay: #{.2 + $i * .1}s;
        }
    }
}

.subtitle
{
    font-size: $fs2;
    font-weight: $fw6;

    display: flex;
    align-items: center;

    margin-bottom: $space1;

    color: rgb($codeBlue);

    &::before
    {
        font-size: $fs14;

        margin-right: $space0n5;

        content: '‚óè';

        color: rgb($codeBlue);
    }

    &:hover
    {
        color: rgb($codeBlueBright);

        &::before
        {
            transition: all .2s ease;
            transform: scale(1.2);

            color: rgb($codeBlueBright);
        }
    }
}

.subSub
{
    font-size: $fs1;
    font-weight: $fw5;

    position: relative;

    margin: $space1 0;

    letter-spacing: .5px;
    text-transform: uppercase;

    color: rgb($codeGreen);

    &::before
    {
        margin-right: $space0n5;

        content: '‚ñ∏';

        color: rgb($codeGreen);
    }
}

.subtext
{
    font-size: $fs16;
    line-height: $baseH;

    margin-bottom: $space1n5;

    text-align: justify;
    word-wrap: break-word;
    -webkit-hyphens: auto;
    // Bessere Lesbarkeit
    hyphens: auto;

    color: rgb($codeTextSec);

    -ms-hyphens: auto;
    overflow-wrap: break-word;
}

.subimage
{
    display: block;

    width: 100%;
    max-width: 600px;
    height: auto;
    margin: $space2 0 $space1 0;

    transition: all .3s ease;

    border-radius: $bR1;
    box-shadow: $shadMd;

    &:hover
    {
        transform: scale(1.02);

        box-shadow: $shadLg;
    }

    // Lazy loading placeholder
    &[src='']
    {
        display: flex;
        align-items: center;
        justify-content: center;

        min-height: 200px;

        background: rgb($codeBgTer);

        &::before
        {
            font-size: $fs6;

            content: 'üì∑';

            color: rgb($codeTextTer);
        }
    }
}

.subtech
{
    font-size: $fs14;
    font-style: italic;

    margin-top: $space0n5;
    padding: $space0n5;

    text-align: center;

    color: rgb($codeTextTer);
    border-radius: 4px;
    background: rgba($codeTextTer, .1);

    &::before
    {
        font-weight: $fw5;

        content: 'Quelle: ';
    }
}

// Responsive Design
@media (max-width: $lg)
{
    .sectionHeader
    {
        font-size: $fs2;

        padding: $space1n5;
    }

    .sectionContent
    {
        padding: $space1n5;
    }

    .subsection
    {
        padding: $space1n5;
    }

    .subtitle
    {
        font-size: $fs1;
    }
}

@media (max-width: $md)
{
    .sectionHeader
    {
        font-size: $fs1;

        padding: $space1;
    }

    .sectionContent
    {
        padding: $space1;
    }

    .subsection
    {
        padding: $space1;
    }

    .sectionMainText
    {
        font-size: $fs14;
    }

    .subtext
    {
        font-size: $fs14;
    }
}

// Print Styles
@media print
{
    .section
    {
        border: 1px solid #ccc;
        box-shadow: none;

        break-inside: avoid;
    }

    .sectionHeader
    {
        background: #f5f5f5 !important;

        &::after
        {
            display: none;
        }
    }

    .sectionContent
    {
        display: block !important; // Alle Sections beim Drucken √∂ffnen
    }

    .subimage
    {
        max-width: 400px;

        page-break-inside: avoid;
    }
}

// Accessibility
@media (prefers-reduced-motion: reduce)
{
    .section,
    .subsection,
    .sectionHeader,
    .subimage
    {
        transition: none;
        animation: none;
    }
}

// Focus Management
.sectionHeader:focus-visible
{
    outline: 2px solid rgb($codeBlue);
    outline-offset: 2px;
}

// Dark Mode Specific
@media (prefers-color-scheme: dark)
{
    .subimage
    {
        box-shadow: 0 4px 8px rgba(0,0,0,.4);
    }

    .subtech
    {
        background: rgba(255,255,255,.05);
    }
}

// Animations
@keyframes fadeInUp
{
    from
    {
        transform: translateY(20px);

        opacity: 0;
    }
    to
    {
        transform: translateY(0);

        opacity: 1;
    }
}

@keyframes slideDown
{
    from
    {
        max-height: 0;

        transform: translateY(-10px);

        opacity: 0;
    }
    to
    {
        max-height: 2000px;

        transform: translateY(0);

        opacity: 1;
    }
}

@keyframes slideInLeft
{
    from
    {
        transform: translateX(-20px);

        opacity: 0;
    }
    to
    {
        transform: translateX(0);

        opacity: 1;
    }
}

// Interactive States
.section
{
    // Bessere Performance f√ºr Animationen
    will-change: transform;
    backface-visibility: hidden;
}

// Selection Styles
.content ::selection
{
    color: rgb($codeTextPri);
    background: rgba($codeBlue, .3);
}

// Scrollbar Styling (Webkit)
.sectionContent
{
    &::-webkit-scrollbar
    {
        width: 6px;
    }

    &::-webkit-scrollbar-track
    {
        border-radius: 3px;
        background: rgb($codeBgTer);
    }

    &::-webkit-scrollbar-thumb
    {
        border-radius: 3px;
        background: rgb($codeBlue);

        &:hover
        {
            background: rgb($codeBlueBright);
        }
    }
}
